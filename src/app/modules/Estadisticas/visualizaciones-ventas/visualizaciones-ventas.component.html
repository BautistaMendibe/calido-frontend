<div class="container">
  <!-- Filtros -->
  <div class="filters-container">
    <div class="row">
      <div class="col d-flex justify-content-between align-items-center">
        <p class="titulo">{{'Estadisticas de Ventas'}}</p>
      </div>
    </div>

    <mat-divider></mat-divider>
    <br>
    <form [formGroup]="filtersForm" class="filters-row mt-3">
      <div class="filter-item">
        <mat-form-field appearance="outline">
          <mat-label>Fecha Inicio</mat-label>
          <input matInput [matDatepicker]="pickerInicio" formControlName="start_date" />
          <mat-datepicker-toggle matSuffix [for]="pickerInicio"></mat-datepicker-toggle>
          <mat-datepicker #pickerInicio></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="filter-item">
        <mat-form-field appearance="outline">
          <mat-label>Fecha Fin</mat-label>
          <input matInput [matDatepicker]="pickerFin" formControlName="end_date" />
          <mat-datepicker-toggle matSuffix [for]="pickerFin"></mat-datepicker-toggle>
          <mat-datepicker #pickerFin></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="filter-item">
        <mat-form-field appearance="outline">
          <mat-label>M√©todo de Pago</mat-label>
          <mat-select formControlName="payment_method">
            <mat-option value="">Todos</mat-option>
            <mat-option *ngFor="let method of paymentMethods" [value]="method">{{ method }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="filter-item">
        <mat-form-field appearance="outline">
          <mat-label>Categor√≠a</mat-label>
          <mat-select formControlName="var_category">
            <mat-option value="">Todas</mat-option>
            <mat-option *ngFor="let category of categories" [value]="category">{{ category }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="filter-item">
        <mat-form-field appearance="outline">
          <mat-label>Empleado</mat-label>
          <mat-select formControlName="employee_name">
            <mat-option value="">Todos</mat-option>
            <mat-option *ngFor="let employee of employees" [value]="employee">{{ employee }}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>  
    </form>
    <div class="row text-right">
      <div class="col d-flex justify-content-end">
        <button mat-button color="accent" class="btn round" (click)="limpiarFiltros()" id="btnLimpiarFiltro">
          <mat-icon>autorenew</mat-icon>
          Limpiar
        </button>
      </div>
    </div>
  </div>

  <!-- Gr√°ficos -->
  <div class="row mt-4">
    <div class="col-md-12 mb-4">
      <div class="chart-card chart-full">
        <h3 class="chart-title"><span class="icon">üìä</span> Ventas totales por forma de pago</h3>
        <iframe [src]="grafanaUrls.formaPago" class="chart-frame"></iframe>
      </div>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col-md-6 mb-4">
      <div class="chart-card">
        <h3 class="chart-title"><span class="icon">üìà</span> Ranking de Ventas por Categor√≠a</h3>
        <iframe [src]="grafanaUrls.categoria" class="chart-frame"></iframe>
      </div>
    </div>
    <div class="col-md-6 mb-4">
      <div class="chart-card">
        <h3 class="chart-title"><span class="icon">‚è∞</span> Ventas por fecha y hora</h3>
        <iframe [src]="grafanaUrls.fechaHora" class="chart-frame"></iframe>
      </div>
    </div>
    <div class="col-md-12 mb-4">
      <div class="chart-card chart-full">
        <h3 class="chart-title"><span class="icon">üë§</span> Ventas por Empleados</h3>
        <iframe [src]="grafanaUrls.empleados" class="chart-frame"></iframe>
      </div>
    </div>
  </div>
</div>
